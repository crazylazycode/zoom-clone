{"version":3,"sources":["components/socket-client.js","components/notifications/notifications.component.jsx","components/options/options.component.jsx","components/video-player/video-player.component.jsx","App.js","index.js"],"names":["SocketContext","createContext","socket","io","ContextProvider","children","useState","callAccepted","setCallAccepted","callEnded","setCallEnded","stream","setStream","name","setName","call","setCall","me","setMe","myVideo","useRef","userVideo","connectionRef","useEffect","navigator","mediaDevices","getUserMedia","video","audio","then","currentStream","current","srcObject","on","id","from","callerName","signal","isReceivingCall","Provider","value","callUser","peer","Peer","initiator","trickle","data","emit","userToCall","signalData","leaveCall","destroy","window","location","reload","answerCall","to","Notifications","useContext","style","display","justifyContent","Button","variant","color","onClick","useStyles","makeStyles","theme","root","flexDirection","gridContainer","width","breakpoints","down","container","margin","padding","marginTop","paper","border","Options","idToCall","setIdToCall","classes","Container","className","Paper","elevation","noValidate","autoComplete","Grid","item","xs","md","Typography","gutterBottom","TextField","label","onChange","e","target","fullWidth","text","startIcon","Assignment","fontSize","PhoneDisabled","Phone","VideoPlayer","playsInline","muted","ref","autoPlay","console","log","appBar","borderRadius","alignItems","image","marginLeft","wrapper","App","AppBar","position","align","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.10eef2bf.chunk.js","sourcesContent":["import React,{ createContext,useEffect,useRef,useState } from \"react\";\n\nimport { io } from 'socket.io-client';\n\nimport Peer from \"simple-peer\";\n\nconst SocketContext = createContext();\n\n// const socket = io(\"http://localhost:5000/\");\nconst socket = io(\"https://not-zoom.herokuapp.com/\");\n\nconst ContextProvider = ({ children }) => {\n    const [callAccepted, setCallAccepted] = useState(false);\n    const [callEnded, setCallEnded] = useState(false);\n    const [stream, setStream] = useState();\n    const [name, setName] = useState('');\n    const [call, setCall] = useState({});\n    const [me, setMe] = useState('');\n  \n    const myVideo = useRef();\n    const userVideo = useRef();\n    const connectionRef = useRef();\n  \n    useEffect(() => {\n      navigator.mediaDevices.getUserMedia({ video: true, audio: true })\n        .then((currentStream) => {\n          setStream(currentStream);\n  \n          myVideo.current.srcObject = currentStream;\n        });\n  \n      socket.on('me', (id) => setMe(id));\n  \n      socket.on('callUser', ({ from, name: callerName, signal }) => {\n        setCall({ isReceivingCall: true, from, name: callerName, signal });\n      });\n    }, []);\n  \n    const answerCall = () => {\n      setCallAccepted(true);\n  \n      const peer = new Peer({ initiator: false, trickle: false, stream });\n  \n      peer.on('signal', (data) => {\n        socket.emit('answerCall', { signal: data, to: call.from });\n      });\n  \n      peer.on('stream', (currentStream) => {\n        userVideo.current.srcObject = currentStream;\n      });\n  \n      peer.signal(call.signal);\n  \n      connectionRef.current = peer;\n    };\n  \n    const callUser = (id) => {\n      const peer = new Peer({ initiator: true, trickle: false, stream });\n  \n      peer.on('signal', (data) => {\n        socket.emit('callUser', { userToCall: id, signalData: data, from: me, name });\n      });\n  \n      peer.on('stream', (currentStream) => {\n        userVideo.current.srcObject = currentStream;\n      });\n  \n      socket.on('callAccepted', (signal) => {\n        setCallAccepted(true);\n  \n        peer.signal(signal);\n      });\n  \n      connectionRef.current = peer;\n    };\n  \n    const leaveCall = () => {\n      setCallEnded(true);\n  \n      connectionRef.current.destroy();\n  \n      window.location.reload();\n    };\n  \n    return (\n      <SocketContext.Provider value={{\n        call,\n        callAccepted,\n        myVideo,\n        userVideo,\n        stream,\n        name,\n        setName,\n        callEnded,\n        me,\n        callUser,\n        leaveCall,\n        answerCall,\n      }}\n      >\n        {children}\n      </SocketContext.Provider>\n    );\n  };\n  \n  export { ContextProvider, SocketContext };","import React, { useContext } from 'react';\nimport { Button } from '@material-ui/core';\n\nimport { SocketContext } from '../socket-client';\n\nconst Notifications = () => {\n  const { answerCall, call, callAccepted } = useContext(SocketContext);\n\n  return (\n    <>\n      {call.isReceivingCall && !callAccepted && (\n        <div style={{ display: 'flex', justifyContent: 'space-around' }}>\n          <h1>{call.name} is calling:</h1>\n          <Button variant=\"contained\" color=\"primary\" onClick={answerCall}>\n            Answer\n          </Button>\n        </div>\n      )}\n    </>\n  );\n};\n\nexport default Notifications;","import React, { useState, useContext } from 'react';\nimport { Button, TextField, Grid, Typography, Container, Paper } from '@material-ui/core';\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\nimport { Assignment, Phone, PhoneDisabled } from '@material-ui/icons';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport { SocketContext } from '../socket-client';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      display: 'flex',\n      flexDirection: 'column',\n    },\n    gridContainer: {\n      width: '100%',\n      [theme.breakpoints.down('xs')]: {\n        flexDirection: 'column',\n      },\n    },\n    container: {\n      width: '600px',\n      margin: '35px 0',\n      padding: 0,\n      [theme.breakpoints.down('xs')]: {\n        width: '80%',\n      },\n    },\n    margin: {\n      marginTop: 20,\n    },\n    padding: {\n      padding: 20,\n    },\n    paper: {\n      padding: '10px 20px',\n      border: '2px solid black',\n    },\n  }));\n  const Options = ({ children }) => {\n    const { me, callAccepted, name, setName, callEnded, leaveCall, callUser } = useContext(SocketContext);\n    const [idToCall, setIdToCall] = useState('');\n    const classes = useStyles();\n  \n    return (\n      <Container className={classes.container}>\n        <Paper elevation={10} className={classes.paper}>\n          <form className={classes.root} noValidate autoComplete=\"off\">\n            <Grid container className={classes.gridContainer}>\n              <Grid item xs={12} md={6} className={classes.padding}>\n                <Typography gutterBottom variant=\"h6\">Account Info</Typography>\n                <TextField label=\"Name\" value={name} onChange={(e) => setName(e.target.value)} fullWidth />\n                <CopyToClipboard text={me} className={classes.margin}>\n                  <Button variant=\"contained\" color=\"primary\" fullWidth startIcon={<Assignment fontSize=\"large\" />}>\n                    Copy Your ID\n                  </Button>\n                </CopyToClipboard>\n              </Grid>\n              <Grid item xs={12} md={6} className={classes.padding}>\n                <Typography gutterBottom variant=\"h6\">Make a call</Typography>\n                <TextField label=\"ID to call\" value={idToCall} onChange={(e) => setIdToCall(e.target.value)} fullWidth />\n                {callAccepted && !callEnded ? (\n                  <Button variant=\"contained\" color=\"secondary\" startIcon={<PhoneDisabled fontSize=\"large\" />} fullWidth onClick={leaveCall} className={classes.margin}>\n                    Hang Up\n                  </Button>\n                ) : (\n                  <Button variant=\"contained\" color=\"primary\" startIcon={<Phone fontSize=\"large\" />} fullWidth onClick={() => callUser(idToCall)} className={classes.margin}>\n                    Call\n                  </Button>\n                )}\n              </Grid>\n            </Grid>\n          </form>\n          {children}\n        </Paper>\n      </Container>\n    );\n  };\n  \n\nexport default Options;","import React, { useContext } from \"react\";\n\nimport { Grid, Typography, Paper, makeStyles } from '@material-ui/core';\nimport { SocketContext } from '../socket-client';\n\nimport './video-player.styles.css';\n\n\nconst useStyles = makeStyles((theme) => ({\n    video: {\n      width: '550px',\n      [theme.breakpoints.down('xs')]: {\n        width: '300px',\n      },\n    },\n    gridContainer: {\n      justifyContent: 'center',\n      [theme.breakpoints.down('xs')]: {\n        flexDirection: 'column',\n      },\n    },\n    paper: {\n      padding: '10px',\n      border: '2px solid black',\n      margin: '10px',\n    },\n  }));\n  const VideoPlayer = () => {\n    const { me,name, callAccepted, myVideo, userVideo, callEnded, stream, call } = useContext(SocketContext);\n    const classes = useStyles();\n  \n    return (\n      <Grid container className={classes.gridContainer}>\n        {stream && (\n          <Paper className={classes.paper}>\n            <Grid item xs={12} md={6}>\n              <Typography variant=\"h5\" gutterBottom>{name || 'Name'}</Typography>\n              <video playsInline muted ref={myVideo} autoPlay className={classes.video} />\n            </Grid>\n          </Paper>\n        )}\n        {console.log(me)}\n        {callAccepted && !callEnded && (\n          <Paper className={classes.paper}>\n            <Grid item xs={12} md={6}>\n              <Typography variant=\"h5\" gutterBottom>{call.name || 'Name'}</Typography>\n              <video playsInline ref={userVideo} autoPlay className={classes.video} />\n            </Grid>\n          </Paper>\n        )}\n      </Grid>\n    );\n  };\n\nexport default VideoPlayer;","import React from \"react\";\n\nimport { Typography, AppBar } from '@material-ui/core';\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Notifications from \"./components/notifications/notifications.component\";\nimport Options from './components/options/options.component';\nimport VideoPlayer from './components/video-player/video-player.component';\n\nimport './App.css';\n\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    borderRadius: 15,\n    margin: '30px 100px',\n    display: 'flex',\n    flexDirection: 'row',\n    justifyContent: 'center',\n    alignItems: 'center',\n    width: '600px',\n    border: '2px  black',\n\n\n    [theme.breakpoints.down('xs')]: {\n      width: '90%',\n    },\n  },\n  image: {\n    marginLeft: '15px',\n  },\n  wrapper: {\n    display: 'flex',\n    flexDirection: 'column',\n    alignItems: 'center',\n    width: '100%',\n  },\n}));\n\nconst App = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.wrapper}>\n      <AppBar className={classes.appBar} position=\"static\" color=\"inherit\">\n        <Typography variant=\"h4\" align=\"center\">Zoom Clone</Typography>\n      </AppBar>\n      <VideoPlayer />\n      <Options>\n        <Notifications />\n      </Options>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nimport { ContextProvider } from './components/socket-client';\n\nReactDOM.render(\n  <React.StrictMode>\n    <ContextProvider>\n      <App />\n    </ContextProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}